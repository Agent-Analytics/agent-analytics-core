// AUTO-GENERATED â€” edit tracker.src.js instead
export const TRACKER_JS = `(function(){"use strict";var i=document.currentScript,h=i&&i.src?new URL(i.src).origin+"/track":"/track",P=i&&i.dataset.project||"default",g=i&&i.dataset.token||null;function A(){var e=localStorage.getItem("aa_uid");return e||(e="anon_"+Math.random().toString(36).substr(2,9)+Date.now().toString(36),localStorage.setItem("aa_uid",e)),e}var m=A(),M=1800*1e3;function U(){var e=Date.now(),r=parseInt(sessionStorage.getItem("aa_last_activity")||"0",10),t=sessionStorage.getItem("aa_sid");return(!t||r&&e-r>M)&&(t="sess_"+Math.random().toString(36).substr(2,9)+e.toString(36),sessionStorage.setItem("aa_sid",t)),sessionStorage.setItem("aa_last_activity",String(e)),t}function E(){for(var e=new URLSearchParams(location.search),r={},t=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"],n=0;n<t.length;n++){var a=e.get(t[n]);a&&(r[t[n]]=a)}return r}var p=E();function N(e){var r="Unknown",t="",n="Unknown",a;return(a=e.match(/(Edge|Edg)\\/([\\d.]+)/))?(r="Edge",t=a[2]):(a=e.match(/OPR\\/([\\d.]+)/))?(r="Opera",t=a[1]):(a=e.match(/Chrome\\/([\\d.]+)/))?(r="Chrome",t=a[1]):(a=e.match(/Safari\\/([\\d.]+)/))?(a=e.match(/Version\\/([\\d.]+)/))&&(r="Safari",t=a[1]):(a=e.match(/Firefox\\/([\\d.]+)/))&&(r="Firefox",t=a[1]),/iPhone|iPad|iPod/.test(e)?n="iOS":/Windows/.test(e)?n="Windows":/Android/.test(e)?n="Android":/CrOS/.test(e)?n="ChromeOS":/Mac OS X/.test(e)?n="macOS":/Linux/.test(e)&&(n="Linux"),{browser:r,browser_version:t.split(".")[0],os:n}}var f=navigator.userAgent||"",s=N(f);function R(){var e=screen.width;return/Tablet|iPad/i.test(f)||e>=768&&e<1024&&!/Mobi/i.test(f)?"tablet":/Mobi/i.test(f)||e<768?"mobile":"desktop"}s.device=R();var S=[],b=null,D=5e3;function I(e,r){navigator.sendBeacon&&navigator.sendBeacon(e,new Blob([r],{type:"text/plain"}))||fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:r,keepalive:!0,credentials:"omit"}).catch(function(){})}function w(){if(S.length){var e=S.splice(0);e.length===1?I(h,JSON.stringify(e[0])):I(h.replace("/track","/track/batch"),JSON.stringify({events:e}))}}function F(){b||(b=setTimeout(function(){b=null,w()},D))}document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&w()}),window.addEventListener("beforeunload",w);function B(e){var r={url:location.href,path:location.pathname,hostname:location.hostname,referrer:document.referrer,title:document.title,screen:screen.width+"x"+screen.height,language:navigator.language||"",browser:s.browser,browser_version:s.browser_version,os:s.os,device:s.device};for(var t in p)r[t]=p[t];if(e)for(var n in e)r[n]=e[n];return r}var _={},c=null,y=!1,u={track:function(e,r){S.push({project:P,token:g,event:e,properties:B(r),user_id:m,session_id:U(),timestamp:Date.now()}),F()},identify:function(e){m=e,localStorage.setItem("aa_uid",e)},page:function(e){this.track("page_view",{page:e||document.title})},experiment:function(e,r){if(_[e]!==void 0)return _[e];var t=null;if(c){for(var n=0;n<c.length;n++)if(c[n].key===e){t=c[n];break}}if(!t&&r){var a=Math.floor(100/r.length),l=100-a*r.length;t={key:e,variants:r.map(function(j,q){return{key:j,weight:a+(q===0?l:0)}})}}if(!t)return null;for(var L=e+"."+m,o=0,x=0;x<L.length;x++)o=(o<<5)-o+L.charCodeAt(x),o=o&o;for(var J=Math.abs(o)%100,T=0,d=t.variants[0].key,v=0;v<t.variants.length;v++)if(T+=t.variants[v].weight,J<T){d=t.variants[v].key;break}return _[e]=d,u.track("$experiment_exposure",{experiment:e,variant:d}),d}};function k(){for(var e=document.querySelectorAll("[data-aa-experiment]"),r=0;r<e.length;r++){var t=e[r],n=t.getAttribute("data-aa-experiment"),a=u.experiment(n);if(a){var l=t.getAttribute("data-aa-variant-"+a.toLowerCase());l!==null&&(t.innerHTML=l)}}document.documentElement.classList.remove("aa-loading")}(function(){if(!g){y=!0,k();return}var r=h.replace("/track","/experiments/config")+"?token="+g;fetch(r,{credentials:"omit"}).then(function(t){return t.json()}).then(function(t){c=t.experiments||[],y=!0,k()}).catch(function(){y=!0,k()})})();var O=location.pathname+location.search;function C(){var e=location.pathname+location.search;e!==O&&(O=e,p=E(),u.page())}window.addEventListener("popstate",C),["pushState","replaceState"].forEach(function(e){var r=history[e];history[e]=function(){var t=r.apply(this,arguments);return C(),t}}),u.page(),window.aa=u})();`;
