// AUTO-GENERATED â€” edit tracker.src.js instead
export const TRACKER_JS = `(function(){"use strict";var a=document.currentScript,v=a&&a.src?new URL(a.src).origin+"/track":"/track",P=a&&a.dataset.project||"default",h=a&&a.dataset.token||null;function C(){var e=localStorage.getItem("aa_uid");return e||(e="anon_"+Math.random().toString(36).substr(2,9)+Date.now().toString(36),localStorage.setItem("aa_uid",e)),e}var g=C(),L=1800*1e3;function M(){var e=Date.now(),r=parseInt(sessionStorage.getItem("aa_last_activity")||"0",10),t=sessionStorage.getItem("aa_sid");return(!t||r&&e-r>L)&&(t="sess_"+Math.random().toString(36).substr(2,9)+e.toString(36),sessionStorage.setItem("aa_sid",t)),sessionStorage.setItem("aa_last_activity",String(e)),t}function k(){for(var e=new URLSearchParams(location.search),r={},t=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"],n=0;n<t.length;n++){var i=e.get(t[n]);i&&(r[t[n]]=i)}return r}var m=k();function U(e){var r="Unknown",t="",n="Unknown",i;return(i=e.match(/(Edge|Edg)\\/([\\d.]+)/))?(r="Edge",t=i[2]):(i=e.match(/OPR\\/([\\d.]+)/))?(r="Opera",t=i[1]):(i=e.match(/Chrome\\/([\\d.]+)/))?(r="Chrome",t=i[1]):(i=e.match(/Safari\\/([\\d.]+)/))?(i=e.match(/Version\\/([\\d.]+)/))&&(r="Safari",t=i[1]):(i=e.match(/Firefox\\/([\\d.]+)/))&&(r="Firefox",t=i[1]),/iPhone|iPad|iPod/.test(e)?n="iOS":/Windows/.test(e)?n="Windows":/Android/.test(e)?n="Android":/CrOS/.test(e)?n="ChromeOS":/Mac OS X/.test(e)?n="macOS":/Linux/.test(e)&&(n="Linux"),{browser:r,browser_version:t.split(".")[0],os:n}}var u=navigator.userAgent||"",s=U(u);function A(){var e=screen.width;return/Tablet|iPad/i.test(u)||e>=768&&e<1024&&!/Mobi/i.test(u)?"tablet":/Mobi/i.test(u)||e<768?"mobile":"desktop"}s.device=A();var p=[],S=null,N=5e3;function I(e,r){navigator.sendBeacon&&navigator.sendBeacon(e,new Blob([r],{type:"text/plain"}))||fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:r,keepalive:!0,credentials:"omit"}).catch(function(){})}function w(){if(p.length){var e=p.splice(0);e.length===1?I(v,JSON.stringify(e[0])):I(v.replace("/track","/track/batch"),JSON.stringify({events:e}))}}function R(){S||(S=setTimeout(function(){S=null,w()},N))}document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&w()}),window.addEventListener("beforeunload",w);function D(e){var r={url:location.href,path:location.pathname,hostname:location.hostname,referrer:document.referrer,title:document.title,screen:screen.width+"x"+screen.height,language:navigator.language||"",browser:s.browser,browser_version:s.browser_version,os:s.os,device:s.device};for(var t in m)r[t]=m[t];if(e)for(var n in e)r[n]=e[n];return r}var b={},c=null,_=!1;(function(){if(!h){_=!0;return}var r=v.replace("/track","/experiments/config")+"?token="+h;fetch(r,{credentials:"omit"}).then(function(t){return t.json()}).then(function(t){c=t.experiments||[],_=!0}).catch(function(){_=!0})})();var f={track:function(e,r){p.push({project:P,token:h,event:e,properties:D(r),user_id:g,session_id:M(),timestamp:Date.now()}),R()},identify:function(e){g=e,localStorage.setItem("aa_uid",e)},page:function(e){this.track("page_view",{page:e||document.title})},experiment:function(e,r){if(b[e]!==void 0)return b[e];var t=null;if(c){for(var n=0;n<c.length;n++)if(c[n].key===e){t=c[n];break}}if(!t&&r){var i=Math.floor(100/r.length),F=100-i*r.length;t={key:e,variants:r.map(function(J,j){return{key:J,weight:i+(j===0?F:0)}})}}if(!t)return null;for(var x=e+"."+g,o=0,y=0;y<x.length;y++)o=(o<<5)-o+x.charCodeAt(y),o=o&o;for(var B=Math.abs(o)%100,T=0,l=t.variants[0].key,d=0;d<t.variants.length;d++)if(T+=t.variants[d].weight,B<T){l=t.variants[d].key;break}return b[e]=l,f.track("$experiment_exposure",{experiment:e,variant:l}),l}},O=location.pathname+location.search;function E(){var e=location.pathname+location.search;e!==O&&(O=e,m=k(),f.page())}window.addEventListener("popstate",E),["pushState","replaceState"].forEach(function(e){var r=history[e];history[e]=function(){var t=r.apply(this,arguments);return E(),t}}),f.page(),window.aa=f})();`;
